<!DOCTYPE html>
<html>
<head><title>Registrace</title>
  <link rel="stylesheet" href="https://api.ssps.cajthaml.eu/file/64d9f18f79dad891e8a07c73">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="Login.css">
</head>
<body>
  <header>
    <section class="profile">
      <a href="Login.html" class="profile-text">Už mám účet</a>
      <i class="fa-solid fa-user icons-profile"></i>
    </section>
  </header>
  <main>
    <section>
      <label for="username">Vytvořte uživatelské jméno</label>
      <input id="username" placeholder="Uživatelské jméno">
    </section>
    <section>
      <label for="password">Vytvořte heslo</label>
      <section>
        <input id="password" type="password" placeholder="Heslo">
        <span class="toggle-password"><i class="fa-solid fa-eye"></i></span>
      </section>
    </section>
    <button onclick="register()">Registrovat</button>
  </main>
  <script>
    async function register() {
      const res = await fetch('http://localhost:3000/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          username: document.getElementById('username').value,
          password: document.getElementById('password').value
        })
      });
      const data = await res.json();
      alert(data.message);
      if (res.ok) window.location.href = 'Login.html';
    }

    document.querySelector('.toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.innerHTML = type === 'password' ? '<i class="fa-solid fa-eye"></i>' : '<i class="fa-solid fa-eye-slash"></i>';
        });
  </script>
</body>
</html>